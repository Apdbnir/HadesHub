<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>HadesHub - Лабораторные работы</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Inline overrides to ensure correct labs layout and defeat caching/conflicts */
        .container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: flex-start !important;
            max-width: 760px !important;
            margin: 0 auto !important;
        }
        h1 { text-align: center !important; margin-bottom: 18px !important; }
        .labs-list { justify-items: center !important; width: 100% !important; }
        .labs-list .btn { display:inline-flex !important; align-items:center !important; justify-content:center !important; }
        .container > a.btn { margin-top: 22px !important; align-self: center !important; }
    </style>
</head>
<body>
    <div class="lang-switcher">
        <button class="lang-btn">EN</button>
    </div>
    <video autoplay muted loop id="background-video">
        <source src="Main Menu.mp4" type="video/mp4">
    </video>
    <div class="container">
        <h1 data-key="selectLab">Выберите лабораторную работу</h1>
        <div class="labs-list">
            <button onclick="startLab('1')" class="btn" data-key="lab1">1 лаба</button>
                <button onclick="startLab('2')" class="btn" data-key="lab2">2 лаба</button>
            <button onclick="startLab('3')" class="btn" data-key="lab3">3 лаба</button>
            <button onclick="startLab('4')" class="btn" data-key="lab4">4 лаба</button>
            <button onclick="startLab('5')" class="btn" data-key="lab5">5 лаба</button>
            <button class="btn disabled" disabled data-key="lab6">6 лаба</button>
        </div>
        <a href="index.html" class="btn" data-key="backToMenu">Назад в меню</a>
    </div>

    <script>
        async function startLab(labId) {
            try {
                // Use the Electron IPC to start the lab
                if (window.electronAPI && window.electronAPI.startLab) {
                    const result = await window.electronAPI.startLab(labId);

                    if (result.success) {
                        console.log(result.message);
                        // Lab loaded in the same window - no alert needed
                    } else {
                        alert(`Ошибка запуска лабораторной работы: ${result.message}`);
                        console.error(result);
                    }
                } else {
                    // Fallback for browser environment
                    alert('Приложение должно запускаться в Electron для запуска лабораторных работ');
                }
            } catch (error) {
                alert('Ошибка при попытке запуска лабораторной работы: ' + error.message);
                console.error('IPC error:', error);
            }
        }

        // Function to go back to labs from a lab page
        function goBackToLabs() {
            window.location.href = 'labs.html';
        }

        // Expose the goBackToLabs function globally for use in lab pages if needed
        window.goBackToLabs = goBackToLabs;
    </script>
    <script src="translate.js"></script>
</body>
</html>
